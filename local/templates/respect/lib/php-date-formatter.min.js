var DateFormatter;(function(){"use strict";var _compare,_lpad,_extend,_indexOf,defaultSettings,DAY,HOUR;DAY=1e3*60*60*24;HOUR=3600;_compare=function(str1,str2){return typeof str1==="string"&&typeof str2==="string"&&str1.toLowerCase()===str2.toLowerCase()};_lpad=function(value,length,chr){var val=value.toString();chr=chr||"0";return val.length<length?_lpad(chr+val,length):val};_extend=function(out){var i,obj;out=out||{};for(i=1;i<arguments.length;i++){obj=arguments[i];if(!obj){continue}for(var key in obj){if(obj.hasOwnProperty(key)){if(typeof obj[key]==="object"){_extend(out[key],obj[key])}else{out[key]=obj[key]}}}}return out};_indexOf=function(val,arr){for(var i=0;i<arr.length;i++){if(arr[i].toLowerCase()===val.toLowerCase()){return i}}return-1};defaultSettings={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function(number){var n=number%10,suffixes={1:"st",2:"nd",3:"rd"};return Math.floor(number%100/10)===1||!suffixes[n]?"th":suffixes[n]}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g};DateFormatter=function(options){var self=this,config=_extend(defaultSettings,options);self.dateSettings=config.dateSettings;self.separators=config.separators;self.validParts=config.validParts;self.intParts=config.intParts;self.tzParts=config.tzParts;self.tzClip=config.tzClip};DateFormatter.prototype={constructor:DateFormatter,getMonth:function(val){var self=this,i;i=_indexOf(val,self.dateSettings.monthsShort)+1;if(i===0){i=_indexOf(val,self.dateSettings.months)+1}return i},parseDate:function(vDate,vFormat){var self=this,vFormatParts,vDateParts,i,vDateFlag=false,vTimeFlag=false,vDatePart,iDatePart,vSettings=self.dateSettings,vMonth,vMeriIndex,vMeriOffset,len,mer,out={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(!vDate){return null}if(vDate instanceof Date){return vDate}if(vFormat==="U"){i=parseInt(vDate);return i?new Date(i*1e3):vDate}switch(typeof vDate){case"number":return new Date(vDate);case"string":break;default:return null}vFormatParts=vFormat.match(self.validParts);if(!vFormatParts||vFormatParts.length===0){throw new Error("Invalid date format definition.")}vDateParts=vDate.replace(self.separators,"\0").split("\0");for(i=0;i<vDateParts.length;i++){vDatePart=vDateParts[i];iDatePart=parseInt(vDatePart);switch(vFormatParts[i]){case"y":case"Y":if(iDatePart){len=vDatePart.length;out.year=len===2?parseInt((iDatePart<70?"20":"19")+vDatePart):iDatePart}else{return null}vDateFlag=true;break;case"m":case"n":case"M":case"F":if(isNaN(iDatePart)){vMonth=self.getMonth(vDatePart);if(vMonth>0){out.month=vMonth}else{return null}}else{if(iDatePart>=1&&iDatePart<=12){out.month=iDatePart}else{return null}}vDateFlag=true;break;case"d":case"j":if(iDatePart>=1&&iDatePart<=31){out.day=iDatePart}else{return null}vDateFlag=true;break;case"g":case"h":vMeriIndex=vFormatParts.indexOf("a")>-1?vFormatParts.indexOf("a"):vFormatParts.indexOf("A")>-1?vFormatParts.indexOf("A"):-1;mer=vDateParts[vMeriIndex];if(vMeriIndex!==-1){vMeriOffset=_compare(mer,vSettings.meridiem[0])?0:_compare(mer,vSettings.meridiem[1])?12:-1;if(iDatePart>=1&&iDatePart<=12&&vMeriOffset!==-1){out.hour=iDatePart%12===0?vMeriOffset:iDatePart+vMeriOffset}else{if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart}}}else{if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart}else{return null}}vTimeFlag=true;break;case"G":case"H":if(iDatePart>=0&&iDatePart<=23){out.hour=iDatePart}else{return null}vTimeFlag=true;break;case"i":if(iDatePart>=0&&iDatePart<=59){out.min=iDatePart}else{return null}vTimeFlag=true;break;case"s":if(iDatePart>=0&&iDatePart<=59){out.sec=iDatePart}else{return null}vTimeFlag=true;break}}if(vDateFlag===true&&out.year&&out.month&&out.day){out.date=new Date(out.year,out.month-1,out.day,out.hour,out.min,out.sec,0)}else{if(vTimeFlag!==true){return null}out.date=new Date(0,0,0,out.hour,out.min,out.sec,0)}return out.date},guessDate:function(vDateStr,vFormat){if(typeof vDateStr!=="string"){return vDateStr}var self=this,vParts=vDateStr.replace(self.separators,"\0").split("\0"),vPattern=/^[djmn]/g,len,vFormatParts=vFormat.match(self.validParts),vDate=new Date,vDigit=0,vYear,i,n,iPart,iSec;if(!vPattern.test(vFormatParts[0])){return vDateStr}for(i=0;i<vParts.length;i++){vDigit=2;iPart=vParts[i];iSec=parseInt(iPart.substr(0,2));if(isNaN(iSec)){return null}switch(i){case 0:if(vFormatParts[0]==="m"||vFormatParts[0]==="n"){vDate.setMonth(iSec-1)}else{vDate.setDate(iSec)}break;case 1:if(vFormatParts[0]==="m"||vFormatParts[0]==="n"){vDate.setDate(iSec)}else{vDate.setMonth(iSec-1)}break;case 2:vYear=vDate.getFullYear();len=iPart.length;vDigit=len<4?len:4;vYear=parseInt(len<4?vYear.toString().substr(0,4-len)+iPart:iPart.substr(0,4));if(!vYear){return null}vDate.setFullYear(vYear);break;case 3:vDate.setHours(iSec);break;case 4:vDate.setMinutes(iSec);break;case 5:vDate.setSeconds(iSec);break}n=iPart.substr(vDigit);if(n.length>0){vParts.splice(i+1,0,n)}}return vDate},parseFormat:function(vChar,vDate){var self=this,vSettings=self.dateSettings,fmt,backslash=/\\?(.?)/gi,doFormat=function(t,s){return fmt[t]?fmt[t]():s};fmt={d:function(){return _lpad(fmt.j(),2)},D:function(){return vSettings.daysShort[fmt.w()]},j:function(){return vDate.getDate()},l:function(){return vSettings.days[fmt.w()]},N:function(){return fmt.w()||7},w:function(){return vDate.getDay()},z:function(){var a=new Date(fmt.Y(),fmt.n()-1,fmt.j()),b=new Date(fmt.Y(),0,1);return Math.round((a-b)/DAY)},W:function(){var a=new Date(fmt.Y(),fmt.n()-1,fmt.j()-fmt.N()+3),b=new Date(a.getFullYear(),0,4);return _lpad(1+Math.round((a-b)/DAY/7),2)},F:function(){return vSettings.months[vDate.getMonth()]},m:function(){return _lpad(fmt.n(),2)},M:function(){return vSettings.monthsShort[vDate.getMonth()]},n:function(){return vDate.getMonth()+1},t:function(){return new Date(fmt.Y(),fmt.n(),0).getDate()},L:function(){var Y=fmt.Y();return Y%4===0&&Y%100!==0||Y%400===0?1:0},o:function(){var n=fmt.n(),W=fmt.W(),Y=fmt.Y();return Y+(n===12&&W<9?1:n===1&&W>9?-1:0)},Y:function(){return vDate.getFullYear()},y:function(){return fmt.Y().toString().slice(-2)},a:function(){return fmt.A().toLowerCase()},A:function(){var n=fmt.G()<12?0:1;return vSettings.meridiem[n]},B:function(){var H=vDate.getUTCHours()*HOUR,i=vDate.getUTCMinutes()*60,s=vDate.getUTCSeconds();return _lpad(Math.floor((H+i+s+HOUR)/86.4)%1e3,3)},g:function(){return fmt.G()%12||12},G:function(){return vDate.getHours()},h:function(){return _lpad(fmt.g(),2)},H:function(){return _lpad(fmt.G(),2)},i:function(){return _lpad(vDate.getMinutes(),2)},s:function(){return _lpad(vDate.getSeconds(),2)},u:function(){return _lpad(vDate.getMilliseconds()*1e3,6)},e:function(){var str=/\((.*)\)/.exec(String(vDate))[1];return str||"Coordinated Universal Time"},I:function(){var a=new Date(fmt.Y(),0),c=Date.UTC(fmt.Y(),0),b=new Date(fmt.Y(),6),d=Date.UTC(fmt.Y(),6);return a-c!==b-d?1:0},O:function(){var tzo=vDate.getTimezoneOffset(),a=Math.abs(tzo);return(tzo>0?"-":"+")+_lpad(Math.floor(a/60)*100+a%60,4)},P:function(){var O=fmt.O();return O.substr(0,3)+":"+O.substr(3,2)},T:function(){var str=(String(vDate).match(self.tzParts)||[""]).pop().replace(self.tzClip,"");return str||"UTC"},Z:function(){return-vDate.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(backslash,doFormat)},r:function(){return"D, d M Y H:i:s O".replace(backslash,doFormat)},U:function(){return vDate.getTime()/1e3||0}};return doFormat(vChar,vChar)},formatDate:function(vDate,vFormat){var self=this,i,n,len,str,vChar,vDateStr="",BACKSLASH="\\";if(typeof vDate==="string"){vDate=self.parseDate(vDate,vFormat);if(!vDate){return null}}if(vDate instanceof Date){len=vFormat.length;for(i=0;i<len;i++){vChar=vFormat.charAt(i);if(vChar==="S"||vChar===BACKSLASH){continue}if(i>0&&vFormat.charAt(i-1)===BACKSLASH){vDateStr+=vChar;continue}str=self.parseFormat(vChar,vDate);if(i!==len-1&&self.intParts.test(vChar)&&vFormat.charAt(i+1)==="S"){n=parseInt(str)||0;str+=self.dateSettings.ordinal(n)}vDateStr+=str}return vDateStr}return""}}})();