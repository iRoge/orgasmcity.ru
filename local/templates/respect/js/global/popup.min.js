(function(){window.Popup=function(){Popup.current=null;Popup.options={container:"body"};Popup.timeout=0;Popup.init=function(){$(document).on("mouseup",function(_this){return function(event){var currentWrapper;if(!Popup.hasPopup()){return}currentWrapper=Popup.current._wrapper;if(!$(currentWrapper).is(event.target)&&$(currentWrapper).has(event.target).length===0){return Popup.hide()}}}(this));return $(window).on("resize",function(event){if(!Popup.hasPopup()){return}clearTimeout(Popup.timeout);return Popup.timeout=setTimeout(function(){return Popup.current.resize()},150)})};Popup.show=function(content,options){if(Popup.hasPopup()){Popup.hide(true);return setTimeout(function(){let popup=Popup["new"](content,options);$(".cls-mail-div").off("click");$(".cls-mail-div").click(function(){$(".podlozhka").hide(0);$(".mail-div").hide(0);$(".auth-div-full").hide(0);$(".popup").hide(0);$("body").removeClass("with--popup")});return popup},600)}else{let popup=Popup["new"](content,options);$(".cls-mail-div").off("click");$(".cls-mail-div").click(function(){$(".podlozhka").hide(0);$(".mail-div").hide(0);$(".auth-div-full").hide(0);$(".popup").hide(0);$("body").removeClass("with--popup")});return popup}};Popup["new"]=function(content,options){var _options;_options=_.extend(_.clone(Popup.options),options);Popup.current=new Popup(content,_options);return Popup.current.show()};Popup.hide=function(withNext){if(withNext==null){withNext=false}Popup.current.destroy(withNext);return Popup.current=null};Popup.hasPopup=function(){return!_.isNull(Popup.current)};function Popup(content,options){this._options=options;this._wrapper=$(this._template()());this._container=$(".popup__container",this._wrapper);if(this._options.title){this._title=$('<header class="popup__header">').appendTo(this._container).text(this._options.title)}if(this._options.className){this._wrapper.addClass(this._options.className)}this._content=$('<article class="popup__content">').appendTo(this._container).html(content);this._events()}Popup.prototype._events=function(){return this._wrapper.on("click",".js-popup-close",function(){return Popup.hide()})};Popup.prototype._template=function(){return _.template(`<div class="popup">
        <div class="popup__wrapper !auth-div-full">
          <div class="cls-mail-div">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <line x1="1.93934" y1="20.4462" x2="20.4461" y2="1.93942" stroke="black" stroke-width="3"/>
              <line x1="2.06066" y1="1.93934" x2="20.5674" y2="20.4461" stroke="black" stroke-width="3"/>
            </svg>
          </div>
          <div class="popup__container"></div>
        </div>
      </div>`)};Popup.prototype.show=function(){var container;container=$(this._options.container);container.addClass("with--popup");this._wrapper.css("opacity",0).prependTo(container);this.resize();return this._wrapper.css("opacity",1).hide().fadeIn("slow",function(_this){return function(){_this.resize();if(_.isFunction(_this._options.onShow)){return _this._options.onShow(_this)}}}(this))};Popup.prototype.destroy=function(withNext){if(withNext==null){withNext=false}return this._wrapper.fadeOut("slow",function(_this){return function(){if(!withNext){$(_this._options.container).removeClass("with--popup")}if(_.isFunction(_this._options.onClose)){_this._options.onClose(_this)}return _this._wrapper.remove()}}(this))};Popup.prototype.resize=function(){var ch,wh;wh=$(window).height();ch=this._content.outerHeight()+150;return this._wrapper.toggleClass("popup--overflow",wh<ch)};return Popup}();Popup.init()}).call(this);