(function(){var ProductGallery;ProductGallery=function(){ProductGallery.options={onClickLarge:function(){},currentIndex:0};ProductGallery.sliderOptions={arrows:true,dots:false,infinite:false,slidesToShow:5,responsive:[{breakpoint:600,settings:{slidesToShow:3}}]};function ProductGallery(container,options){if(options==null){options={}}this._options=_.extend(_.clone(ProductGallery.options),options);this._container=$(container);this._slider=$(".product-gallery__slider",this._container);this._links=$("a",this._slider);this._currentIndex=this._options.currentIndex;this._initLarge();this._initSlider();this._events();this.show(this._currentIndex)}ProductGallery.prototype._initLarge=function(){this._largeContainer=$('<div class="product-gallery__large">');this._large=$('<a class="product-gallery__large-link"></a>').appendTo(this._largeContainer);return this._container.prepend(this._largeContainer)};ProductGallery.prototype._initSlider=function(){var options;options=_.extend(_.clone(ProductGallery.sliderOptions),this._options.sliderOptions);return this._slider.slick(options)};ProductGallery.prototype._events=function(){this._links.on("click",_.bind(this._selectImage,this));return this._large.on("click",function(_this){return function(){return _this._options.onClickLarge(_this._currentIndex)}}(this))};ProductGallery.prototype._selectImage=function(event){event.preventDefault();return this.show($(event.currentTarget).index())};ProductGallery.prototype.show=function(index){this._currentIndex=index;this._large.css("backgroundImage","url("+this._getImageSource(index)+")");this._links.removeClass("selected");return $(this._links[index]).addClass("selected")};ProductGallery.prototype._getImageSource=function(index){return $(this._links[index]).attr("href")};ProductGallery.prototype["export"]=function(){var dom,i,len,link,ref;dom=$('<section class="product-gallery">\n  <div class="product-gallery__slider">\n\n  </div>\n</section>');ref=this._links;for(i=0,len=ref.length;i<len;i++){link=ref[i];$(".product-gallery__slider",dom).append($(link).clone())}return dom};return ProductGallery}();window.ProductGallery=ProductGallery}).call(this);