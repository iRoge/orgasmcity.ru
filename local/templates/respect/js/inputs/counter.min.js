(function(){window.CountInput=function(){CountInput.init=function(container){if(container==null){container=$("body")}return $("input.counter",container).each(function(index,input){if($(input).data("counter")){return}return new CountInput(input)})};function CountInput(input){this._input=$(input);this._input.data("counter",this);this._render()}CountInput.prototype._render=function(){var decrease,increase;_.bindAll(this,"increase","decrease","fixNumber");this._wrapper=$('<div class="counter-wrapper">').appendTo(this._input.parent());this._wrapper.append(this._input);decrease=$('<a class="counter__decrease"><i class="icon icon-arrow-bottom"></i></a>');decrease.on("click",function(_this){return function(){_this.decrease();return _this.fixNumber()}}(this));this._wrapper.prepend(decrease);increase=$('<a class="counter__increase"><i class="icon icon-arrow-up"></i></a>');increase.on("click",function(_this){return function(){_this.increase();return _this.fixNumber()}}(this));this._input.on("change",function(_this){return function(){return _this.fixNumber()}}(this));return this._wrapper.append(increase)};CountInput.prototype.increase=function(){var value;value=parseInt(this._input.val());return this._input.val(value+1)};CountInput.prototype.decrease=function(){var newValue,value;value=parseInt(this._input.val());newValue=value-1;if(newValue<0){newValue=0}return this._input.val(newValue)};CountInput.prototype.fixNumber=function(){if(!this._input.data("maximum"))return false;var maxValue,value;value=parseInt(this._input.val());maxValue=parseInt(this._input.data("maximum"));if(value>maxValue)return this._input.val(maxValue)};return CountInput}()}).call(this);