(function(){window.SkuPopup=function(){SkuPopup.init=function(container){if(container==null){container=$("body")}return $(".js-sku",container).each(function(index,element){if($(element).data("sku-popup")){return}return new SkuPopup(element)})};function SkuPopup(element){this._element=$(element);this._element.data("sku-popup",this);this._sku=this._element.data("sku")||0;this._element.on("click",_.bind(this.show,this))}SkuPopup.prototype._render=function(){var template;template=_.template('<form class="sku-form tooltip-popup" style="display:none">\n  <table>\n    <thead>\n      <tr>\n        <th id="<%= id %>"><%= sku %></th>\n      </tr>\n    </thead>\n    <tfoot>\n      <tr>\n        <td>\n          <a class="button button--primary button--block js-copy js-hide" data-clipboard-target="#<%= id %>">Скопировать</a>\n        </td>\n      </tr>\n    </tr>\n    </tfoot>\n  </table>\n</form>');this._element.append(template({id:_.uniqueId("sku_"),sku:this._sku}));this._container=$("form.sku-form",this._element);new Clipboard($(".js-copy",this._container)[0]);$(".js-hide",this._container).on("click",_.bind(this.hide,this));return $(document).on("mouseup",function(_this){return function(event){if(!_this._element.is(event.target)&&_this._element.has(event.target).length===0){return _this.hide()}}}(this))};SkuPopup.prototype.show=function(){if(!this._container){this._render()}this._element.addClass("expanded");return this._container.show()};SkuPopup.prototype.hide=function(){if(!this._container){return}return setTimeout(function(_this){return function(){_this._element.removeClass("expanded");return _this._container.hide()}}(this),0)};return SkuPopup}()}).call(this);