(function(){var ShopPage,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;ShopPage=function(superClass){extend(ShopPage,superClass);function ShopPage(){return ShopPage.__super__.constructor.apply(this,arguments)}ShopPage.prototype.initialize=function(){$("#shop-photo-slider").slick({arrows:true,dots:false,infinite:true,slidesToShow:2,centerMode:true,variableWidth:true,focusOnSelect:true,responsive:[{breakpoint:375,settings:{slidesToShow:1}}]});$("#shop-photo-slider-1").slick({arrows:false,dots:false,infinite:false,slidesToShow:1,variableWidth:true,focusOnSelect:true,centerMode:true,responsive:[{breakpoint:640,settings:{arrows:true}}]});$("#shop-photo-slider-2").slick({arrows:false,dots:false,infinite:false,slidesToShow:2,centerMode:false,variableWidth:true,focusOnSelect:false,responsive:[{breakpoint:1280,settings:{arrows:true,slidesToShow:1,infinite:true,focusOnSelect:true,centerMode:true}}]});return setTimeout(function(_this){return function(){return _this._showMap()}}(this),500)};ShopPage.prototype._showMap=function(url){if(url==null){url=window.application.getUrl("shopList")}return $.ajax({method:"get",url:url,contentType:"json",success:function(_this){return function(response){var i,index,len,ref,shop;_this._shops=[];ref=response.shops;for(index=i=0,len=ref.length;i<len;index=++i){shop=ref[index];shop.index=index;_this._shops.push(shop)}return _this._initMap()}}(this)})};ShopPage.prototype._initMap=function(){return this._map=new window.GoogleMapView($("#shop-map"),{items:_.sample(this._shops,1),google:{zoom:15}})};return ShopPage}(_Page);window.Pages.register("shop",ShopPage)}).call(this);